# 2026-02-27 進捗ログ

## 取り組んだこと

`SET` コマンドのパーサー実装と、それに対するテストコードの記述。

## 学んだこと・要点

1.  **`assert_eq!` と `enum`**:
    - `enum` を `assert_eq!` で比較するには、`#[derive(PartialEq, Debug)]` が必要であることを学んだ。
    - `PartialEq` は `==` での比較を可能にし、`Debug` はテスト失敗時に中身を整形して表示する。

2.  **`Result` 型のテスト**:
    - `parse_command` が返す `Result<Command, String>` をテストした。
    - 成功ケース: `Ok(Command::Set { ... })` という期待値を直接作って比較した。
    - 失敗ケース: `result.is_err()` でエラー発生を表明したり、`Err("...".to_string())` で特定のエラーメッセージであることを表明した。

3.  **プロジェクト構成（ライブラリ化）**:
    - `tests/` ディレクトリ（統合テスト）から `src/` のコードを呼び出すため、`src/main.rs` から `src/lib.rs` へロジックを切り出した。
    - これにより、プロジェクトが「バイナリ」と「ライブラリ」の両方の性質を持つようになった。

4.  **異常系テストの拡充**:
    - `SET` と `GET` コマンドで引数が足りないケース (`"SET mykey"`, `"GET"`) のテストを追加し、パーサーの堅牢性を高めた。

## 作成・修正したファイル

- `src/lib.rs`: `Command` enum と `parse_command` 関数を実装。
- `src/main.rs`: ライブラリ (`lib.rs`) を呼び出す形に修正。
- `tests/parser_test.rs`: `SET`/`GET` の正常系・異常系のテストを実装。

## 次のアクション

- パースしたコマンド (`Command` enum) を使って、実際にデータをインメモリ（`HashMap` など）に保存・取得する機能の実装に進む。
